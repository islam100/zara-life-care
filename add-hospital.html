<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Hospital Post</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
    max-width: 600px;
    margin: auto;
  }
  label {
    display: block;
    margin: 10px 0 5px;
  }
  input, textarea, select, button {
    width: 100%;
    padding: 8px;
    margin-bottom: 15px;
    box-sizing: border-box;
  }
  button {
    background: #4caf50;
    color: white;
    border: none;
    cursor: pointer;
    font-weight: bold;
    border-radius: 8px;
  }
  button:disabled {
    background: gray;
    cursor: not-allowed;
  }
  #status {
    margin-bottom: 15px;
    color: green;
  }
</style>
</head>
<body>

<h2>Hospital Post Form</h2>

<div id="status"></div>

<form id="hospitalForm">
  <label for="name">Hospital Name</label>
  <input type="text" id="name" required />

  <label for="area">Area / Location</label>
  <input type="text" id="area" required />

  <label for="whatsapp">WhatsApp Number (with country code, eg: +919876543210)</label>
  <input type="text" id="whatsapp" required />

  <label for="image">Upload Image</label>
  <input type="file" id="image" accept="image/*" required />

  <button type="submit">Post Hospital</button>
</form>

<script>
  const form = document.getElementById('hospitalForm');
  const statusDiv = document.getElementById('status');

  // अपने Imgur Client-ID यहां डालें
  const IMGUR_CLIENT_ID = 'YOUR_IMGUR_CLIENT_ID';

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const name = document.getElementById('name').value.trim();
    const area = document.getElementById('area').value.trim();
    const whatsapp = document.getElementById('whatsapp').value.trim();
    const imageFile = document.getElementById('image').files[0];

    if (!imageFile) {
      alert('Please select an image.');
      return;
    }

    statusDiv.textContent = 'Uploading image... Please wait.';

    // Imgur API में इमेज अपलोड करें
    const formData = new FormData();
    formData.append('image', imageFile);

    try {
      const response = await fetch('https://api.imgur.com/3/image', {
        method: 'POST',
        headers: {
          Authorization: 'Client-ID ' + IMGUR_CLIENT_ID,
        },
        body: formData
      });

      const data = await response.json();

      if (data.success) {
        const imageUrl = data.data.link;
        statusDiv.textContent = 'Image uploaded successfully!';

        // अब hospital data को localStorage में सेव करें (या Firebase में अपलोड करें)
        // यहां मैं localStorage में सेव कर रहा हूं demo के लिए
        const hospitals = JSON.parse(localStorage.getItem('hospitals') || '[]');
        hospitals.push({ name, area, whatsapp, imageUrl });
        localStorage.setItem('hospitals', JSON.stringify(hospitals));

        alert('Hospital posted successfully!');
        form.reset();
        statusDiv.textContent = '';
      } else {
        statusDiv.textContent = 'Image upload failed. Try again.';
      }
    } catch (error) {
      console.error(error);
      statusDiv.textContent = 'Error uploading image.';
    }
  });
</script>

</body>
</html>
